"use strict";(self.webpackChunkreact_task3=self.webpackChunkreact_task3||[]).push([[303],{4303:function(e,t,n){n.r(t),n.d(t,{DashBoardExport:function(){return K},default:function(){return L}});var a=n(2791),r=n(4165),c=n(5861),s=n(9439),o=a.createContext({products:{},fetchProducts:function(){},addProduct:function(e){},editProduct:function(e,t){},deleteProduct:function(e){},adding:!1,submitted:void 0,setSubmitted:function(){},edited:!1,setEdited:function(){},errorMessage:void 0,setErrorMessage:function(e){},toggleAdding:function(){}}),l=n(1243),i=n(184);function d(e){var t=(0,a.useState)({}),n=(0,s.Z)(t,2),d=n[0],u=n[1],m=(0,a.useState)(!1),f=(0,s.Z)(m,2),h=f[0],p=f[1],x=(0,a.useState)(),g=(0,s.Z)(x,2),b=g[0],v=g[1],j=(0,a.useState)(!1),N=(0,s.Z)(j,2),k=N[0],C=N[1],w=(0,a.useState)(),y=(0,s.Z)(w,2),Z=y[0],_=y[1],D=(0,a.useCallback)((0,c.Z)((0,r.Z)().mark((function e(){var t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return _(),console.log("fetching"),e.prev=2,e.next=5,l.Z.get("".concat("https://react-11af9-default-rtdb.firebaseio.com","/products.json"));case 5:t=e.sent,u(t.data),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(2),_(e.t0.message),console.error(e.t0);case 13:case"end":return e.stop()}}),e,null,[[2,9]])}))),[]);(0,a.useEffect)((function(){D()}),[D]);var P=(0,a.useCallback)(function(){var e=(0,c.Z)((0,r.Z)().mark((function e(t){var n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return _(),console.log("adding the following product",t),e.prev=2,e.next=5,l.Z.post("".concat("https://react-11af9-default-rtdb.firebaseio.com","/products.json"),t);case 5:n=e.sent,console.log("response",n),v(n.data.name),D(),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(2),_(e.t0.message),console.error(e.t0);case 15:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(t){return e.apply(this,arguments)}}(),[D]),I=(0,a.useCallback)(function(){var e=(0,c.Z)((0,r.Z)().mark((function e(t,n){var a;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return _(),console.log("editing"),console.log("editing the product with ID ".concat(t)),console.log("new product details",n),e.prev=4,e.next=7,l.Z.put("".concat("https://react-11af9-default-rtdb.firebaseio.com","/products/").concat(t,".json"),n);case 7:a=e.sent,console.log("response",a),C(!0),D(),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(4),_(e.t0.message),console.error(e.t0);case 17:case"end":return e.stop()}}),e,null,[[4,13]])})));return function(t,n){return e.apply(this,arguments)}}(),[D]),S=(0,a.useCallback)(function(){var e=(0,c.Z)((0,r.Z)().mark((function e(t){var n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return _(),console.log("deleting"),console.log("deleting product with ID ".concat(t)),e.prev=3,e.next=6,l.Z.delete("".concat("https://react-11af9-default-rtdb.firebaseio.com","/products/").concat(t,".json"));case 6:n=e.sent,console.log("response",n),D(),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(3),_(e.t0.message),console.error(e.t0);case 15:case"end":return e.stop()}}),e,null,[[3,11]])})));return function(t){return e.apply(this,arguments)}}(),[D]),O={products:d,fetch:D,addProduct:P,editProduct:I,deleteProduct:S,adding:h,submitted:b,setSubmitted:v,edited:k,setEdited:C,errorMessage:Z,setErrorMessage:_,toggleAdding:function(){p((function(e){return!e}))}};return(0,i.jsx)(o.Provider,{value:O,children:e.children})}var u=a.memo(d),m=n(9142);function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){var a,r,c;a=e,r=t,c=n[t],(r=(0,m.Z)(r))in a?Object.defineProperty(a,r,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[r]=c})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p=a.forwardRef((function(e,t){var n=(0,a.useRef)();return(0,a.useImperativeHandle)(t,(function(){return{getValue:function(){return n.current.value}}}),[]),(0,i.jsxs)("div",{className:"form-group row pb-2 ".concat(e.className&&e.className),children:[(0,i.jsx)("label",{htmlFor:e.name,className:"col-sm-2 col-form-label",children:e.name}),(0,i.jsxs)("div",{className:"col-sm-10",children:[e.textarea&&(0,i.jsx)("textarea",h({className:"form-control",id:e.name,rows:"2",ref:n,value:e.value,onChange:e.onChange,onBlur:e.onBlur,defaultValue:e.defaultValue,readOnly:e.readOnly},e.input)),!e.textarea&&(0,i.jsx)("input",h({type:"text",className:"form-control",id:e.name,ref:n,value:e.value,onChange:e.onChange,onBlur:e.onBlur,defaultValue:e.defaultValue,readOnly:e.readOnly},e.input))]})]})})),x=n(9119),g=n(7430),b=n(4817),v={input:"",touched:""},j=function(e,t){switch(t.type){case"SET_INPUT":return h(h({},e),{},{input:t.input});case"BLUR":return h(h({},e),{},{touched:!0});default:return v}};var N=function(e){var t=(0,a.useReducer)(j,v),n=(0,s.Z)(t,2),r=n[0],c=n[1],o=!e||e(r.input),l=!o&&r.touched;return[r.input,function(e){c({type:"SET_INPUT",input:e})},o,l,function(e){c({type:"SET_INPUT",input:e.target.value})},function(e){c({type:"BLUR"})},function(){c({type:"RESET"})}]},k="ProductForm_form__3OYhm",C="ProductForm_invalid__kHoRD",w="ProductForm_error-text__u1+hb",y=function(e){return 0!==e.trim().length};var Z=function(e){var t,n=(0,a.useContext)(o),r=(0,a.useState)(!0),c=(0,s.Z)(r,2),l=c[0],d=c[1];e.content&&delete(t=h({},e.content)).ID;var u=N(y),m=(0,s.Z)(u,7),f=m[0],v=m[1],j=m[2],Z=m[3],_=m[4],D=m[5],P=m[6],I=(0,a.useState)(t?t["Alt Name"]:""),S=(0,s.Z)(I,2),O=S[0],E=S[1],F=N(y),M=(0,s.Z)(F,7),A=M[0],T=M[1],B=M[2],R=M[3],W=M[4],H=M[5],U=M[6],V=N((function(e){return e>=1})),q=(0,s.Z)(V,7),K=q[0],L=q[1],Y=q[2],z=q[3],Q=q[4],X=q[5],G=q[6],J=(0,a.useState)(t?t.New:"false"),$=(0,s.Z)(J,2),ee=$[0],te=$[1],ne=N((function(e){return 0===e.toString().trim().length||1<=parseInt(e)&&parseInt(e)<100})),ae=(0,s.Z)(ne,6),re=ae[0],ce=ae[1],se=ae[2],oe=ae[3],le=ae[4],ie=ae[5],de=(0,a.useState)({image:t?t.Image:"",valid:!0}),ue=(0,s.Z)(de,2),me=ue[0],fe=ue[1];t&&l&&(d(!1),v(t.Name),T(t.Description),L(t.Price),ce(t.Discount?t.Discount:""));var he=j&&B&&Y&&se;return(0,i.jsxs)("form",{id:"form",className:k,children:[(0,i.jsx)(p,{className:"".concat(Z&&C),name:"Name",input:{placeholder:"Name"},value:f,onChange:_,onBlur:D}),Z&&(0,i.jsx)("p",{className:w,children:"Invalid Name"}),(0,i.jsx)(p,{name:"Alt Name",input:{placeholder:"Alt Name (Same As Name By Default)"},value:O,onChange:function(e){E(e.target.value)}}),(0,i.jsx)(p,{className:"".concat(R&&C),name:"Description",input:{placeholder:"Description"},value:A,onChange:W,onBlur:H,textarea:!0}),R&&(0,i.jsx)("p",{className:w,children:"Invalid Description"}),(0,i.jsx)(p,{className:"".concat(z&&C),name:"Price",input:{placeholder:"Price",type:"number",min:1,step:.01},value:K,onChange:Q,onBlur:X}),z&&(0,i.jsx)("p",{className:w,children:"Invalid Price"}),(0,i.jsx)("fieldset",{className:"form-group py-2",children:(0,i.jsxs)("div",{className:"row",children:[(0,i.jsx)("legend",{className:"col-form-label col-sm-2 pt-0",children:"New"}),(0,i.jsx)("div",{className:"col-sm-10",children:(0,i.jsxs)("div",{className:"form-check px-0",children:[(0,i.jsx)(b.Z,{className:"m-0",name:"New",id:"true",value:"true",onChange:te.bind(null,"true"),checked:t&&"true"===t.New}),(0,i.jsx)("label",{className:"form-check-label me-5",htmlFor:"true",children:"True"}),(0,i.jsx)(b.Z,{className:"m-0",name:"New",id:"false",value:"false",onChange:te.bind(null,"false"),checked:!(t&&t.New)}),(0,i.jsx)("label",{className:"form-check-label me-5",htmlFor:"false",children:"False"})]})})]})}),(0,i.jsx)(p,{className:"".concat(!se&&C),name:"Discount",input:{placeholder:"Discount Percentage (1-99)",type:"number",min:1,step:1,max:99},value:re,onChange:oe,onBlur:le}),!se&&(0,i.jsx)("p",{className:w,children:"Invalid Discount"}),(0,i.jsx)(p,{className:"".concat(!me.valid&&C),name:"Image",onChange:function(e){var t=e.target.files[0],n=new FileReader;n.onloadend=function(){fe({image:n.result,valid:n.result.startsWith("data:image/png;base64,")&&n.result.trim().length>"data:image/png;base64,".trim().length})},n.readAsDataURL(t)},input:{type:"file"}}),!me.valid&&(0,i.jsx)("p",{className:w,children:"Invalid Image"}),(0,i.jsx)("div",{className:"form-group row",children:(0,i.jsxs)("div",{className:"container-fluid d-flex justify-content-end",children:[(0,i.jsx)(x.Z,{onClick:function(a){a.preventDefault();var r=me.image.startsWith("data:image/png;base64,")&&me.image.length>22;if(fe((function(e){return h(h({},e),{},{valid:r})})),he=he&&r){var c={name:f,alt:0===O.trim().length?f:O,description:A,price:parseFloat(K),src:me.image};"true"===ee&&(c=h(h({},c),{},{new:"true"})),0!==re.toString().trim().length&&(c=h(h({},c),{},{discount:parseInt(re)})),t?(c=h(h({},c),{},{alt:O}),n.editProduct(e.ID,c)):n.addProduct(c),P(),E(""),U(),G(),te("false"),ie(),fe({image:"default",valid:!1}),e.onClick()}},className:"mx-2",text:"Submit",disabled:!he}),(0,i.jsx)(g.Z,{onClick:e.onClick,className:"mx-2",text:"Cancel"})]})})]})},_="TableHeader_header-row__mbTZD",D="TableHeader_header-item__+qemo";function P(e){var t=e.headers.map((function(e,t){return(0,i.jsx)("th",{className:D,children:e},"header".concat(t))}));return(0,i.jsx)("thead",{children:(0,i.jsx)("tr",{className:_,children:t})})}var I=a.memo(P),S=n(4164),O={backdrop:"Modal_backdrop__MtgIY","no-form":"Modal_no-form__K74h9",modal:"Modal_modal__KTaFQ","slide-down":"Modal_slide-down__N6TWj"};function E(e){return(0,i.jsx)("div",{className:O.backdrop,onClick:e.onClick})}function F(e){return(0,i.jsx)("div",{className:"".concat(O.modal," ").concat(e.noForm&&O["no-form"]),children:(0,i.jsx)("div",{className:O.content,children:e.children})})}var M=function(e){return(0,i.jsxs)(i.Fragment,{children:[S.createPortal((0,i.jsx)(E,{onClick:e.onClick}),document.getElementById("overlay")),S.createPortal((0,i.jsx)(F,{noForm:e.noForm,children:e.children}),document.getElementById("overlay"))]})},A=n(9234),T="TableCell_cell-item__RAftp",B="TableCell_cell-row__hrntF";function R(e){var t=(0,a.useContext)(o),n=(0,a.useState)(!1),r=(0,s.Z)(n,2),c=r[0],l=r[1],d=(0,a.useState)(!1),u=(0,s.Z)(d,2),m=u[0],f=u[1],h=function(){f((function(e){return!e}))},p=Object.keys(e.content).map((function(t,n){return(0,i.jsxs)("td",{className:T,children:[e.content[t]&&!e.content[t].toString().startsWith("data:image/png;base64,")&&"New"!==t&&e.content[t],e.content[t]&&!e.content[t].toString().startsWith("data:image/png;base64,")&&"New"===t&&(0,i.jsx)(A.Z,{iconName:"bi bi-check-square-fill",style:{color:"#b88e2f"}}),e.content[t]&&e.content[t].toString().startsWith("data:image/png;base64,")&&(0,i.jsx)("img",{src:e.content[t],alt:e.content["Alt Name"],className:"img-fluid w-100",style:{height:"200px"}})]},"cell".concat(e.rowNumber).concat(n))}));return p=p.concat((0,i.jsxs)("td",{className:T,children:[!c&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(g.Z,{className:"",text:"Edit",onClick:h}),(0,i.jsx)(x.Z,{text:"Delete",onClick:l.bind(null,!0)})]}),c&&(0,i.jsxs)("div",{className:"container",children:[(0,i.jsx)("p",{children:"Confirm Delete?"}),(0,i.jsx)(x.Z,{className:"mx-1",text:"Yes",onClick:t.deleteProduct.bind(null,e.ID)}),(0,i.jsx)(g.Z,{className:"mx-1 px-3",text:"No",onClick:l.bind(null,!1)})]})]},"cell".concat(e.rowNumber,"modify"))),(0,i.jsxs)(i.Fragment,{children:[m&&(0,i.jsxs)(M,{onClick:h,children:[(0,i.jsxs)("p",{className:"m-0 p-3",style:{backgroundColor:"#b88e2f",color:"white"},children:["Editing Product with ID: ",e.ID]}),(0,i.jsx)(Z,{onClick:h,edit:!0,ID:e.ID,content:e.content})]}),(0,i.jsx)("tr",{className:B,children:p})]})}var W=a.memo(R),H="Table_styled-table__nKwMX";var U=function(e){var t=(0,a.useContext)(o),n=Object.keys(t.products).map((function(e,n){return(0,i.jsx)(W,{ID:e,rowNumber:n,content:{ID:e,Name:t.products[e].name,"Alt Name":t.products[e].alt,Description:t.products[e].description,Price:t.products[e].price,New:t.products[e].new,Discount:t.products[e].discount,Image:t.products[e].src}},e)}));return(0,i.jsxs)("table",{className:H,children:[(0,i.jsx)(I,{headers:(0,a.useMemo)((function(){return["Product ID","Name","Alt Name","Description","Price","New","Discount","Image","Modify"]}),[])}),(0,i.jsx)("tbody",{children:n})]})},V="Dashboard_limit-height__dEhql";function q(e){document.title="Dashboard";var t=(0,a.useContext)(o);return(0,i.jsxs)(i.Fragment,{children:[t.errorMessage&&(0,i.jsxs)(M,{onClick:t.setErrorMessage.bind(null,void 0),noForm:!0,children:[(0,i.jsx)("p",{children:"An Error occured"}),(0,i.jsxs)("p",{children:["Error Message: ",t.errorMessage]}),(0,i.jsx)("div",{className:"container text-end",children:(0,i.jsx)(x.Z,{onClick:t.setErrorMessage.bind(null,void 0),className:"mx-2",text:"Ok"})})]}),t.adding&&(0,i.jsx)(M,{onClick:t.toggleAdding,children:(0,i.jsx)(Z,{onClick:t.toggleAdding,add:!0})}),t.submitted&&(0,i.jsxs)(M,{noForm:!0,onClick:t.toggleAdding,children:[(0,i.jsxs)("p",{children:["Product Submitted Successfully with ID: ",t.submitted]}),(0,i.jsx)("div",{className:"container text-end",children:(0,i.jsx)(x.Z,{onClick:t.setSubmitted.bind(null,void 0),className:"mx-2",text:"Ok"})})]}),t.edited&&(0,i.jsxs)(M,{noForm:!0,onClick:t.setEdited.bind(null,!1),children:[(0,i.jsx)("p",{children:"Product Edited Successfully"}),(0,i.jsx)("div",{className:"container text-end",children:(0,i.jsx)(x.Z,{onClick:t.setEdited.bind(null,!1),className:"mx-2",text:"Ok"})})]}),(0,i.jsxs)("div",{className:"container-fluid px-5 pb-5 ".concat(V),children:[(0,i.jsx)("div",{className:"container-fluid d-flex justify-content-center my-5",children:(0,i.jsx)(x.Z,{className:"w-25",text:"New Product",onClick:t.toggleAdding})}),(0,i.jsx)(U,{})]})]})}var K=function(){return(0,i.jsx)(u,{children:(0,i.jsx)(q,{})})},L=K},9119:function(e,t,n){var a=n(184);t.Z=function(e){return(0,a.jsx)("button",{className:"btn yellow-button ".concat(e.className&&e.className),style:{fontWeight:"650",fontSize:"16px",lineHeight:"24px"},onClick:e.onClick,hidden:e.hidden,type:e.type,disabled:e.disabled,children:e.text})}},7430:function(e,t,n){var a=n(184);t.Z=function(e){return(0,a.jsx)("div",{className:"btn yellow-button-outline ".concat(e.className&&e.className),style:{fontWeight:"700",fontSize:"16px",lineHeight:"24px"},onClick:e.onClick,hidden:e.hidden,children:e.text})}},4817:function(e,t,n){var a=n(184);t.Z=function(e){return(0,a.jsxs)("div",{className:"form-check form-check-inline ".concat(e.className&&e.className),children:[(0,a.jsx)("input",{"aria-label":e.id,className:"radio-button",type:"radio",name:e.name,id:e.id,value:e.value,defaultChecked:e.checked,onClick:e.onClick,onChange:e.onChange}),e.label&&(0,a.jsx)("label",{class:"form-check-label",for:e.id,children:e.value})]})}}}]);
//# sourceMappingURL=303.8d908281.chunk.js.map